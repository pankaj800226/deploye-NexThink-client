import{r as l,j as a,b as j,l as Y,n as O,o as Ce,p as ke,q as De,e as A,g as N,f as Pe,t as H,i as I,h as B,v as J,P as Z,F as G,w as je,x as F,s as b,d as P,M as Te,y as we,m as ee,u as Me,A as X,B as U,z as R}from"./index-CsUNMcKn.js";import{S as We}from"./SideBar-DYMF38-J.js";import{a as K,b as q}from"./api-DUhR3JNR.js";import{A as Fe}from"./ApiError-DqQ7ZgSV.js";import{u as Re}from"./index-D6RVGWce.js";import{m as $}from"./proxy-CcHnjAHe.js";import{E as $e}from"./Edit-Be9wv528.js";import{e as Ae,T as Ne}from"./Typography-CjFOli3J.js";import{s as Be,u as Ee}from"./useThemeProps-gBr62Iwi.js";import{T as Q}from"./TextField-CJUgSAE1.js";import"./iconBase-Bs8776E5.js";import"./getThemeProps-DwgxWsaW.js";const Ue=Pe(),Ie=Be("div",{name:"MuiStack",slot:"Root"});function Le(e){return Ee({props:e,name:"MuiStack",defaultTheme:Ue})}function Ve(e,o){const t=l.Children.toArray(e).filter(Boolean);return t.reduce((s,n,r)=>(s.push(n),r<t.length-1&&s.push(l.cloneElement(o,{key:`separator-${r}`})),s),[])}const Oe=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],_e=({ownerState:e,theme:o})=>{let t={display:"flex",flexDirection:"column",...Y({theme:o},O({values:e.direction,breakpoints:o.breakpoints.values}),s=>({flexDirection:s}))};if(e.spacing){const s=Ce(o),n=Object.keys(o.breakpoints.values).reduce((i,c)=>((typeof e.spacing=="object"&&e.spacing[c]!=null||typeof e.direction=="object"&&e.direction[c]!=null)&&(i[c]=!0),i),{}),r=O({values:e.direction,base:n}),u=O({values:e.spacing,base:n});typeof r=="object"&&Object.keys(r).forEach((i,c,g)=>{if(!r[i]){const f=c>0?r[g[c-1]]:"column";r[i]=f}}),t=ke(t,Y({theme:o},u,(i,c)=>e.useFlexGap?{gap:H(s,i)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Oe(c?r[c]:e.direction)}`]:H(s,i)}}))}return t=De(o.breakpoints,t),t};function ze(e={}){const{createStyledComponent:o=Ie,useThemeProps:t=Le,componentName:s="MuiStack"}=e,n=()=>A({root:["root"]},i=>N(s,i),{}),r=o(_e);return l.forwardRef(function(i,c){const g=t(i),C=Ae(g),{component:f="div",direction:x="column",spacing:T=0,divider:v,children:h,className:S,useFlexGap:y=!1,...k}=C,w={direction:x,spacing:T,useFlexGap:y},p=n();return a.jsx(r,{as:f,ownerState:w,ref:c,className:j(p.root,S),...k,children:v?Ve(h,v):h})})}function Ye(e){return N("MuiDialog",e)}const _=I("MuiDialog",["root","backdrop","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),oe=l.createContext({}),He=b(we,{name:"MuiDialog",slot:"Backdrop"})({zIndex:-1}),Ge=e=>{const{classes:o,scroll:t,maxWidth:s,fullWidth:n,fullScreen:r}=e,u={root:["root"],backdrop:["backdrop"],container:["container",`scroll${P(t)}`],paper:["paper",`paperScroll${P(t)}`,`paperWidth${P(String(s))}`,n&&"paperFullWidth",r&&"paperFullScreen"]};return A(u,Ye,o)},Xe=b(Te,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Ke=b("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.container,o[`scroll${P(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),qe=b(Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.paper,o[`scrollPaper${P(t.scroll)}`],o[`paperWidth${P(String(t.maxWidth))}`],t.fullWidth&&o.paperFullWidth,t.fullScreen&&o.paperFullScreen]}})(ee(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:o})=>!o.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${_.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(o=>o!=="xs").map(o=>({props:{maxWidth:o},style:{maxWidth:`${e.breakpoints.values[o]}${e.breakpoints.unit}`,[`&.${_.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[o]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:o})=>o.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:o})=>o.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${_.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Qe=l.forwardRef(function(o,t){const s=B({props:o,name:"MuiDialog"}),n=J(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":u,"aria-labelledby":d,"aria-modal":i=!0,BackdropComponent:c,BackdropProps:g,children:C,className:f,disableEscapeKeyDown:x=!1,fullScreen:T=!1,fullWidth:v=!1,maxWidth:h="sm",onClick:S,onClose:y,open:k,PaperComponent:w=Z,PaperProps:p={},scroll:m="paper",slots:te={},slotProps:ae={},TransitionComponent:se=G,transitionDuration:z=r,TransitionProps:re,...ie}=s,D={...s,disableEscapeKeyDown:x,fullScreen:T,fullWidth:v,maxWidth:h,scroll:m},E=Ge(D),L=l.useRef(),ne=W=>{L.current=W.target===W.currentTarget},le=W=>{S&&S(W),L.current&&(L.current=null,y&&y(W,"backdropClick"))},V=je(d),ce=l.useMemo(()=>({titleId:V}),[V]),pe={transition:se,...te},de={transition:re,paper:p,backdrop:g,...ae},M={slots:pe,slotProps:de},[ue,me]=F("root",{elementType:Xe,shouldForwardComponentProp:!0,externalForwardedProps:M,ownerState:D,className:j(E.root,f),ref:t}),[fe,ge]=F("backdrop",{elementType:He,shouldForwardComponentProp:!0,externalForwardedProps:M,ownerState:D,className:E.backdrop}),[he,xe]=F("paper",{elementType:qe,shouldForwardComponentProp:!0,externalForwardedProps:M,ownerState:D,className:j(E.paper,p.className)}),[ye,be]=F("container",{elementType:Ke,externalForwardedProps:M,ownerState:D,className:E.container}),[ve,Se]=F("transition",{elementType:G,externalForwardedProps:M,ownerState:D,additionalProps:{appear:!0,in:k,timeout:z,role:"presentation"}});return a.jsx(ue,{closeAfterTransition:!0,slots:{backdrop:fe},slotProps:{backdrop:{transitionDuration:z,as:c,...ge}},disableEscapeKeyDown:x,onClose:y,open:k,onClick:le,...me,...ie,children:a.jsx(ve,{...Se,children:a.jsx(ye,{onMouseDown:ne,...be,children:a.jsx(he,{as:w,elevation:24,role:"dialog","aria-describedby":u,"aria-labelledby":V,"aria-modal":i,...xe,children:a.jsx(oe.Provider,{value:ce,children:C})})})})})});function Je(e){return N("MuiDialogActions",e)}I("MuiDialogActions",["root","spacing"]);const Ze=e=>{const{classes:o,disableSpacing:t}=e;return A({root:["root",!t&&"spacing"]},Je,o)},eo=b("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,!t.disableSpacing&&o.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),oo=l.forwardRef(function(o,t){const s=B({props:o,name:"MuiDialogActions"}),{className:n,disableSpacing:r=!1,...u}=s,d={...s,disableSpacing:r},i=Ze(d);return a.jsx(eo,{className:j(i.root,n),ownerState:d,ref:t,...u})});function to(e){return N("MuiDialogContent",e)}I("MuiDialogContent",["root","dividers"]);function ao(e){return N("MuiDialogTitle",e)}const so=I("MuiDialogTitle",["root"]),ro=e=>{const{classes:o,dividers:t}=e;return A({root:["root",t&&"dividers"]},to,o)},io=b("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.dividers&&o.dividers]}})(ee(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:o})=>o.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:o})=>!o.dividers,style:{[`.${so.root} + &`]:{paddingTop:0}}}]}))),no=l.forwardRef(function(o,t){const s=B({props:o,name:"MuiDialogContent"}),{className:n,dividers:r=!1,...u}=s,d={...s,dividers:r},i=ro(d);return a.jsx(io,{className:j(i.root,n),ownerState:d,ref:t,...u})}),lo=e=>{const{classes:o}=e;return A({root:["root"]},ao,o)},co=b(Ne,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),po=l.forwardRef(function(o,t){const s=B({props:o,name:"MuiDialogTitle"}),{className:n,id:r,...u}=s,d=s,i=lo(d),{titleId:c=r}=l.useContext(oe);return a.jsx(co,{component:"h2",className:j(i.root,n),ownerState:d,ref:t,variant:"h6",id:r??c,...u})}),uo=ze({createStyledComponent:b("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>B({props:e,name:"MuiStack"})}),Po=()=>{const[e,o]=l.useState(!1),t=J(),s=Re(t.breakpoints.down("sm")),[n,r]=l.useState(null),[u,d]=l.useState(""),[i,c]=l.useState(!1),[g,C]=l.useState(null),f=localStorage.getItem("TOKEN"),x=Me(),[T,v]=l.useState(!1),[h,S]=l.useState({username:"",email:"",file:""}),y=p=>{S({...h,[p.target.name]:p.target.value})},k=p=>{if(p.target.files&&p.target.files[0]){const m=p.target.files[0];C(m)}};l.useEffect(()=>{(async()=>{if(!f)return R.error("You are not login"),x("/login");try{c(!0);const m=await K.get(`${q}/api/user/profile`,{headers:{Authorization:`Bearer ${f}`}});r(m.data),S({username:m?.data.username,email:m?.data.email,file:""})}catch(m){console.log(m),R.error("Failed to fetch profile"),d("Api Fetching Error")}finally{c(!1)}})()},[f,x]);const w=async()=>{const p=new FormData;if(p.append("username",h.username),p.append("email",h.email),g&&p.append("file",g),!f)return R.error("You are not login"),x("/login");v(!0);try{const m=await K.put(`${q}/api/user/editProfile`,p,{headers:{Authorization:`Bearer ${f}`}});r(m.data),o(!1),R.success("Profile updated")}catch(m){console.log(m),R.error("Error updating profile"),d("Api Fetching Error")}finally{v(!1)}};return u?a.jsx(Fe,{error:u}):i?a.jsx(X,{}):a.jsxs("div",{className:"dashboard_container",children:[a.jsx(We,{}),a.jsx("main",{children:a.jsxs($.div,{className:"profile_container",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx($.div,{className:"profile_left",whileHover:{scale:1.06},transition:{type:"spring",stiffness:120},children:a.jsx($.img,{src:n?.avatar,alt:"User Avatar",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5}})}),a.jsxs($.div,{className:"profile_right",initial:{x:40,opacity:0},animate:{x:0,opacity:1},transition:{duration:.6},children:[a.jsx("h1",{children:n?.username}),a.jsx("p",{className:"email",children:n?.email}),a.jsx("span",{className:"role",children:"Creator"}),a.jsx($.div,{whileHover:{scale:1.08},className:"edit_btn",children:a.jsx(U,{onClick:()=>o(!0),startIcon:a.jsx($e,{}),children:"Edit Profile"})})]})]})}),a.jsxs(Qe,{open:e,onClose:()=>o(!1),fullScreen:s,fullWidth:!0,maxWidth:"sm",disableRestoreFocus:!0,disableEnforceFocus:!0,children:[a.jsx(po,{children:"Edit Profile"}),a.jsx(no,{children:a.jsxs(uo,{spacing:2,mt:1,children:[a.jsx(Q,{label:"Username",name:"username",fullWidth:!0,value:h.username,onChange:y}),a.jsx(Q,{label:"Email",name:"email",fullWidth:!0,value:h.email,onChange:y}),a.jsxs(U,{fullWidth:!0,component:"label",sx:{mt:2,py:1.2,border:"1px dashed #0ff",color:"#222",fontWeight:"bold",textTransform:"none","&:hover":{backgroundColor:"rgba(0,255,255,0.08)"}},children:[g?g.name:"Avatar",a.jsx("input",{hidden:!0,type:"file",accept:"image/*",onChange:k})]})]})}),a.jsxs(oo,{children:[a.jsx(U,{onClick:()=>o(!1),children:"Cancel"}),a.jsx(U,{variant:"contained",onClick:w,children:T?a.jsx(X,{}):"Update"})]})]})]})};export{Po as default};
