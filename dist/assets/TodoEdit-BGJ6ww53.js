import{r as l,v as I,u as k,j as e,n as A,P,M as a,B as w,z as x}from"./index-GuULtFLE.js";import{S as D}from"./SideBar-CKQIWIvr.js";import{a as m,b as y}from"./api-DUhR3JNR.js";import{A as L}from"./ApiError-Bt-NL0D1.js";import{B as M}from"./Box-BtsRqp6a.js";import{T as B}from"./Typography-CvsgPR7R.js";import{T as s}from"./TextField-D5W0ETDv.js";import{A as O}from"./AddTask-DeSQS9I7.js";import"./iconBase-D3lCwRQ8.js";const J=()=>{const[r,f]=l.useState({title:"",description:"",price:"",category:"",priority:"",status:"",createdAt:new Date().toISOString()}),[j,h]=l.useState(!1),[p,b]=l.useState(""),[v,g]=l.useState(!1),{id:d}=I(),S=k(),o=n=>{const{name:t,value:c}=n.target;f(u=>({...u,[t]:c}))};l.useEffect(()=>{(async()=>{try{g(!0);const t=await m.get(`${y}/api/todo/getTaskId/${d}`);f({title:t.data.title||"",description:t.data.description||"",price:t.data.price||"",category:t.data.category||"",priority:t.data.priority||"",status:t.data.status||"",createdAt:t.data.createdAt||new Date().toISOString()})}catch(t){console.log(t),b("Api fetching error")}finally{g(!1)}})()},[d]);const T=async()=>{const{title:n,description:t,price:c,category:u,priority:C,status:W}=r;try{h(!0),await m.put(`${y}/api/todo/editTodo/${d}`,{title:n,description:t,price:c,category:u,priority:C,status:W}),x.success("Todo updated successfully"),S("/managetodo")}catch(E){console.log(E),x.error("Error while editing todo")}finally{h(!1)}};return p?e.jsx(L,{error:p}):v?e.jsx(A,{}):e.jsxs("div",{className:"dashboard_container",children:[e.jsx(D,{}),e.jsx("main",{children:e.jsx(M,{sx:{minHeight:"100vh",display:"flex",alignItems:"center"},children:e.jsxs(P,{elevation:6,sx:{padding:4,borderRadius:3,background:"#151a1f"},children:[e.jsx(B,{variant:"h5",mb:3,textAlign:"center",color:"#fff",fontWeight:"bold",children:"Edit Todo"}),e.jsx(s,{value:r.title,onChange:o,fullWidth:!0,label:"Title",name:"title",sx:i}),e.jsx(s,{value:r.price,onChange:o,fullWidth:!0,type:"number",label:"Price",name:"price",sx:i}),e.jsxs(s,{value:r.category,onChange:o,fullWidth:!0,select:!0,label:"Category",name:"category",sx:i,children:[e.jsx(a,{value:"Work",children:"Work"}),e.jsx(a,{value:"Personal",children:"Personal"}),e.jsx(a,{value:"Study",children:"Study"}),e.jsx(a,{value:"Other",children:"Other"})]}),e.jsxs(s,{value:r.priority,onChange:o,fullWidth:!0,select:!0,label:"Priority",name:"priority",sx:i,children:[e.jsx(a,{value:"Low",children:"Low"}),e.jsx(a,{value:"Medium",children:"Medium"}),e.jsx(a,{value:"High",children:"High"})]}),e.jsxs(s,{value:r.status,onChange:o,fullWidth:!0,select:!0,label:"Status",name:"status",sx:i,children:[e.jsx(a,{value:"pending",children:"Pending"}),e.jsx(a,{value:"inprogress",children:"In Progress"}),e.jsx(a,{value:"completed",children:"completed"})]}),e.jsx(s,{value:r.description,onChange:o,fullWidth:!0,multiline:!0,rows:9,label:"Description",name:"description",sx:i}),e.jsx(w,{fullWidth:!0,variant:"contained",startIcon:e.jsx(O,{}),onClick:T,sx:{mt:3,py:1.4,background:"linear-gradient(135deg,#6a5af9,#9a6bff)",fontWeight:"bold",borderRadius:2},children:j?"Loading...":" Edit Todo"})]})})})]})},i={mb:2,"& label":{color:"#aaa"},"& label.Mui-focused":{color:"#6a5af9"},"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#2a2f36"},"&:hover fieldset":{borderColor:"#6a5af9"},"&.Mui-focused fieldset":{borderColor:"#9a6bff"}}};export{J as default};
