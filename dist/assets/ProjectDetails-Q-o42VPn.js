import{r as s,j as e,n as C,L as A,B as c,z as f,l as z,v as M,M as v}from"./index-BW7gK_ch.js";import{S as E}from"./SideBar-DZi7H3vK.js";import{a as m,b as x}from"./api-DUhR3JNR.js";import{A as k}from"./ApiError--lr0Hegw.js";import{E as U}from"./Edit-Da-5y4Kr.js";import{D as W}from"./Delete-7gZ7G_os.js";import{C as B,U as I}from"./CoverImg-SlHH82qB.js";import{u as O}from"./index-B4Y06OAD.js";import{D as R,a as H,b as K,S as Q,c as q}from"./Stack-CcyhWKbz.js";import{T as b}from"./TextField-C6g_lDS8.js";import"./iconBase-BfNzzL28.js";import"./getThemeProps-C9y_DJLS.js";import"./Typography-CXbPZ9go.js";import"./useThemeProps-DFX2tiZ3.js";const G=({id:l,refresh:i})=>{const[d,u]=s.useState([]),[r,g]=s.useState(""),[h,p]=s.useState(!1);s.useEffect(()=>{if(!l)return;(async()=>{try{p(!0);const a=await m.get(`${x}/api/feature/get/feature/${l}`);u(a.data.findFeature)}catch(a){console.log(a),g("api fetching error")}finally{p(!1)}})()},[l,i]);const y=async t=>{try{await m.delete(`${x}/api/feature/delete/feature/${t}`),u(a=>a.filter(j=>j._id!==t)),f.success("feature delete done")}catch(a){console.log(a),f.error("error")}};return r?e.jsx(k,{error:r}):h?e.jsx(C,{}):e.jsxs("div",{className:"dashboard_container",children:[e.jsx(E,{}),e.jsx("main",{children:e.jsxs("div",{className:"todo-wrapper",children:[e.jsx("h2",{className:"todo-title",children:"All Feature"}),d.length===0?e.jsx("div",{className:"todo-empty",children:"No Feature yet ðŸš€"}):e.jsx("ul",{className:"todo-list",children:d.map(t=>e.jsxs("li",{className:`todo-item ${t.status}`,children:[e.jsxs("div",{className:"todo-left",children:[e.jsx("span",{className:"todo-dot"}),e.jsxs("div",{children:[e.jsx("h4",{children:t.title}),e.jsx("small",{children:t.status})]})]}),e.jsxs("div",{className:"todo-actions",children:[e.jsx(A,{to:`/editfeature/${t._id}`,children:e.jsx(c,{size:"small",children:e.jsx(U,{})})}),e.jsx(c,{onClick:()=>y(t._id),size:"small",color:"error",children:e.jsx(W,{})})]})]},t._id))})]})})]})},ce=()=>{const[l,i]=s.useState(!1),d=z(),u=O(d.breakpoints.down("sm")),[r,g]=s.useState(null),[h,p]=s.useState(""),[y,t]=s.useState(!1),{id:a}=M(),[j,S]=s.useState(""),[D,F]=s.useState("pending"),[w,N]=s.useState(!1),_=localStorage.getItem("TOKEN"),[$,L]=s.useState(!1);s.useEffect(()=>{(async()=>{try{t(!0);const n=await m.get(`${x}/api/project/projectId/${a}`);g(n.data)}catch(n){console.log(n),p("api fetching error")}finally{t(!1)}})()},[]);const P=o=>{switch(o){case"High":return"#ff4d4d";case"Medium":return"#ffb703";case"Low":return"#6025c7";default:return"#4ade80"}},T=async()=>{try{N(!0),(await m.post(`${x}/api/feature/create/feature/${a}`,{title:j,status:D},{headers:{Authorization:`Bearer ${_}`}})).status===200&&(f("!Feature create Done.",{duration:2e3,position:"bottom-right",icon:"ðŸ‘",iconTheme:{primary:"#000",secondary:"#fff"},ariaProps:{role:"status","aria-live":"polite"}}),L(n=>!n)),i(!1)}catch(o){console.log(o),f.error("error")}finally{N(!1)}S(""),F("")};return h?e.jsx(k,{error:h}):y?e.jsx(C,{}):e.jsxs("div",{className:"dashboard_container",children:[e.jsx(E,{}),e.jsxs("main",{children:[e.jsx(B,{}),e.jsxs("div",{className:"project_header",children:[e.jsx("p",{children:'"ðŸ’•Enjoy you works and complete your task"ðŸ’“'}),e.jsx(c,{onClick:()=>i(!0),children:e.jsx(I,{})})]}),e.jsxs("div",{className:"project_details",children:[e.jsx("h2",{children:r?.title}),e.jsx("p",{children:r?.category}),e.jsx("strong",{style:{color:P(r?.priority)},children:r?.priority}),e.jsx("strong",{children:r?.status}),e.jsx("p",{children:r?.startDate}),e.jsx("p",{children:r?.endDate}),e.jsx("p",{className:"description",children:r?.description})]}),e.jsx(G,{id:a,refresh:$})]}),e.jsxs(R,{open:l,onClose:()=>i(!1),fullScreen:u,fullWidth:!0,maxWidth:"sm",disableRestoreFocus:!0,disableEnforceFocus:!0,children:[e.jsx(H,{sx:{color:"white"},children:"Upload Feature"}),e.jsx(K,{children:e.jsxs(Q,{spacing:2,mt:1,children:[e.jsx(b,{label:"Title",fullWidth:!0,value:j,onChange:o=>S(o.target.value)}),e.jsxs(b,{value:D,onChange:o=>F(o.target.value),fullWidth:!0,select:!0,label:"Status",children:[e.jsx(v,{value:"pending",children:"Pending"}),e.jsx(v,{value:"working",children:"Working"}),e.jsx(v,{value:"completed",children:"Completed"})]})]})}),e.jsxs(q,{children:[e.jsx(c,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(c,{onClick:T,variant:"contained",children:w?"Loading...":"Update"})]})]})]})};export{ce as default};
