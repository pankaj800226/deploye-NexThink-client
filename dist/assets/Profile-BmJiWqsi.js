import{l as De,r as c,R as Pe,n as je,j as r,b as j,o as Y,p as O,q as we,t as Me,v as Te,e as $,g as A,f as We,w as z,i as L,h as N,x as Z,P as q,F as H,y as Ee,A as E,s as b,d as P,M as Re,D as Fe,m as ee,T as $e,u as Ae,E as G,B as U,z as R}from"./index-BwBHtjEM.js";import{S as Ne}from"./SideBar-CNiExJtz.js";import{a as X,b as K}from"./api-DUhR3JNR.js";import{A as Be}from"./ApiError-BIACpizb.js";import{g as Ue,s as Le,u as Ie}from"./useThemeProps-Dcyr4Dko.js";import{m as F}from"./proxy-C_etEG8Z.js";import{E as Qe}from"./Edit-Bb0tcnNk.js";import{e as Oe,T as Ve,a as J}from"./TextField-BVBGKJgS.js";import"./iconBase-Coflz5dC.js";function _e(e,t,o,s,i){const[a,p]=c.useState(()=>i&&o?o(e).matches:s?s(e).matches:t);return je(()=>{if(!o)return;const l=o(e),n=()=>{p(l.matches)};return n(),l.addEventListener("change",n),()=>{l.removeEventListener("change",n)}},[e,o]),a}const Ye={...Pe},te=Ye.useSyncExternalStore;function ze(e,t,o,s,i){const a=c.useCallback(()=>t,[t]),p=c.useMemo(()=>{if(i&&o)return()=>o(e).matches;if(s!==null){const{matches:u}=s(e);return()=>u}return a},[a,e,s,i,o]),[l,n]=c.useMemo(()=>{if(o===null)return[a,()=>()=>{}];const u=o(e);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[a,o,e]);return te(n,l,p)}function oe(e={}){const{themeId:t}=e;return function(s,i={}){let a=De();a&&t&&(a=a[t]||a);const p=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:n=p?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=Ue({name:"MuiUseMediaQuery",props:i,theme:a});let f=typeof s=="function"?s(a):s;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(te!==void 0?ze:_e)(f,l,n,d,u)}}oe();const He=We(),Ge=Le("div",{name:"MuiStack",slot:"Root"});function Xe(e){return Ie({props:e,name:"MuiStack",defaultTheme:He})}function Ke(e,t){const o=c.Children.toArray(e).filter(Boolean);return o.reduce((s,i,a)=>(s.push(i),a<o.length-1&&s.push(c.cloneElement(t,{key:`separator-${a}`})),s),[])}const Je=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Ze=({ownerState:e,theme:t})=>{let o={display:"flex",flexDirection:"column",...Y({theme:t},O({values:e.direction,breakpoints:t.breakpoints.values}),s=>({flexDirection:s}))};if(e.spacing){const s=we(t),i=Object.keys(t.breakpoints.values).reduce((n,d)=>((typeof e.spacing=="object"&&e.spacing[d]!=null||typeof e.direction=="object"&&e.direction[d]!=null)&&(n[d]=!0),n),{}),a=O({values:e.direction,base:i}),p=O({values:e.spacing,base:i});typeof a=="object"&&Object.keys(a).forEach((n,d,u)=>{if(!a[n]){const h=d>0?a[u[d-1]]:"column";a[n]=h}}),o=Me(o,Y({theme:t},p,(n,d)=>e.useFlexGap?{gap:z(s,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Je(d?a[d]:e.direction)}`]:z(s,n)}}))}return o=Te(t.breakpoints,o),o};function qe(e={}){const{createStyledComponent:t=Ge,useThemeProps:o=Xe,componentName:s="MuiStack"}=e,i=()=>$({root:["root"]},n=>A(s,n),{}),a=t(Ze);return c.forwardRef(function(n,d){const u=o(n),f=Oe(u),{component:h="div",direction:y="column",spacing:w=0,divider:S,children:x,className:C,useFlexGap:v=!1,...k}=f,M={direction:y,spacing:w,useFlexGap:v},m=i();return r.jsx(a,{as:h,ownerState:M,ref:d,className:j(m.root,C),...k,children:S?Ke(x,S):x})})}function et(e){return A("MuiDialog",e)}const V=L("MuiDialog",["root","backdrop","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),se=c.createContext({}),tt=b(Fe,{name:"MuiDialog",slot:"Backdrop"})({zIndex:-1}),ot=e=>{const{classes:t,scroll:o,maxWidth:s,fullWidth:i,fullScreen:a}=e,p={root:["root"],backdrop:["backdrop"],container:["container",`scroll${P(o)}`],paper:["paper",`paperScroll${P(o)}`,`paperWidth${P(String(s))}`,i&&"paperFullWidth",a&&"paperFullScreen"]};return $(p,et,t)},st=b(Re,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),at=b("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.container,t[`scroll${P(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),rt=b(q,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.paper,t[`scrollPaper${P(o.scroll)}`],t[`paperWidth${P(String(o.maxWidth))}`],o.fullWidth&&t.paperFullWidth,o.fullScreen&&t.paperFullScreen]}})(ee(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${V.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${V.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${V.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),nt=c.forwardRef(function(t,o){const s=N({props:t,name:"MuiDialog"}),i=Z(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":p,"aria-labelledby":l,"aria-modal":n=!0,BackdropComponent:d,BackdropProps:u,children:f,className:h,disableEscapeKeyDown:y=!1,fullScreen:w=!1,fullWidth:S=!1,maxWidth:x="sm",onClick:C,onClose:v,open:k,PaperComponent:M=q,PaperProps:m={},scroll:g="paper",slots:ae={},slotProps:re={},TransitionComponent:ne=H,transitionDuration:_=a,TransitionProps:ie,...le}=s,D={...s,disableEscapeKeyDown:y,fullScreen:w,fullWidth:S,maxWidth:x,scroll:g},B=ot(D),I=c.useRef(),ce=W=>{I.current=W.target===W.currentTarget},pe=W=>{C&&C(W),I.current&&(I.current=null,v&&v(W,"backdropClick"))},Q=Ee(l),de=c.useMemo(()=>({titleId:Q}),[Q]),ue={transition:ne,...ae},me={transition:ie,paper:m,backdrop:u,...re},T={slots:ue,slotProps:me},[fe,ge]=E("root",{elementType:st,shouldForwardComponentProp:!0,externalForwardedProps:T,ownerState:D,className:j(B.root,h),ref:o}),[he,xe]=E("backdrop",{elementType:tt,shouldForwardComponentProp:!0,externalForwardedProps:T,ownerState:D,className:B.backdrop}),[ye,ve]=E("paper",{elementType:rt,shouldForwardComponentProp:!0,externalForwardedProps:T,ownerState:D,className:j(B.paper,m.className)}),[be,Se]=E("container",{elementType:at,externalForwardedProps:T,ownerState:D,className:B.container}),[Ce,ke]=E("transition",{elementType:H,externalForwardedProps:T,ownerState:D,additionalProps:{appear:!0,in:k,timeout:_,role:"presentation"}});return r.jsx(fe,{closeAfterTransition:!0,slots:{backdrop:he},slotProps:{backdrop:{transitionDuration:_,as:d,...xe}},disableEscapeKeyDown:y,onClose:v,open:k,onClick:pe,...ge,...le,children:r.jsx(Ce,{...ke,children:r.jsx(be,{onMouseDown:ce,...Se,children:r.jsx(ye,{as:M,elevation:24,role:"dialog","aria-describedby":p,"aria-labelledby":Q,"aria-modal":n,...ve,children:r.jsx(se.Provider,{value:de,children:f})})})})})});function it(e){return A("MuiDialogActions",e)}L("MuiDialogActions",["root","spacing"]);const lt=e=>{const{classes:t,disableSpacing:o}=e;return $({root:["root",!o&&"spacing"]},it,t)},ct=b("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,!o.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),pt=c.forwardRef(function(t,o){const s=N({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:a=!1,...p}=s,l={...s,disableSpacing:a},n=lt(l);return r.jsx(ct,{className:j(n.root,i),ownerState:l,ref:o,...p})});function dt(e){return A("MuiDialogContent",e)}L("MuiDialogContent",["root","dividers"]);function ut(e){return A("MuiDialogTitle",e)}const mt=L("MuiDialogTitle",["root"]),ft=e=>{const{classes:t,dividers:o}=e;return $({root:["root",o&&"dividers"]},dt,t)},gt=b("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.dividers&&t.dividers]}})(ee(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${mt.root} + &`]:{paddingTop:0}}}]}))),ht=c.forwardRef(function(t,o){const s=N({props:t,name:"MuiDialogContent"}),{className:i,dividers:a=!1,...p}=s,l={...s,dividers:a},n=ft(l);return r.jsx(gt,{className:j(n.root,i),ownerState:l,ref:o,...p})}),xt=e=>{const{classes:t}=e;return $({root:["root"]},ut,t)},yt=b(Ve,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),vt=c.forwardRef(function(t,o){const s=N({props:t,name:"MuiDialogTitle"}),{className:i,id:a,...p}=s,l=s,n=xt(l),{titleId:d=a}=c.useContext(se);return r.jsx(yt,{component:"h2",className:j(n.root,i),ownerState:l,ref:o,variant:"h6",id:a??d,...p})}),bt=qe({createStyledComponent:b("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>N({props:e,name:"MuiStack"})}),St=oe({themeId:$e}),Et=()=>{const[e,t]=c.useState(!1),o=Z(),s=St(o.breakpoints.down("sm")),[i,a]=c.useState(null),[p,l]=c.useState(""),[n,d]=c.useState(!1),[u,f]=c.useState(null),h=localStorage.getItem("TOKEN"),y=Ae(),[w,S]=c.useState(!1),[x,C]=c.useState({username:"",email:"",file:""}),v=m=>{C({...x,[m.target.name]:m.target.value})},k=m=>{if(m.target.files&&m.target.files[0]){const g=m.target.files[0];f(g)}};c.useEffect(()=>{(async()=>{if(!h)return R.error("You are not login"),y("/login");try{d(!0);const g=await X.get(`${K}/api/user/profile`,{headers:{Authorization:`Bearer ${h}`}});a(g.data),C({username:g?.data.username,email:g?.data.email,file:""})}catch(g){console.log(g),R.error("Failed to fetch profile"),l("Api Fetching Error")}finally{d(!1)}})()},[h,y]);const M=async()=>{const m=new FormData;if(m.append("username",x.username),m.append("email",x.email),u&&m.append("file",u),!h)return R.error("You are not login"),y("/login");S(!0);try{const g=await X.put(`${K}/api/user/editProfile`,m,{headers:{Authorization:`Bearer ${h}`}});a(g.data),t(!1),R.success("Profile updated")}catch(g){console.log(g),R.error("Error updating profile"),l("Api Fetching Error")}finally{S(!1)}};return p?r.jsx(Be,{error:p}):n?r.jsx(G,{}):r.jsxs("div",{className:"dashboard_container",children:[r.jsx(Ne,{}),r.jsx("main",{children:r.jsxs(F.div,{className:"profile_container",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsx(F.div,{className:"profile_left",whileHover:{scale:1.06},transition:{type:"spring",stiffness:120},children:r.jsx(F.img,{src:i?.avatar,alt:"User Avatar",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5}})}),r.jsxs(F.div,{className:"profile_right",initial:{x:40,opacity:0},animate:{x:0,opacity:1},transition:{duration:.6},children:[r.jsx("h1",{children:i?.username}),r.jsx("p",{className:"email",children:i?.email}),r.jsx("span",{className:"role",children:"Creator"}),r.jsx(F.div,{whileHover:{scale:1.08},className:"edit_btn",children:r.jsx(U,{onClick:()=>t(!0),startIcon:r.jsx(Qe,{}),children:"Edit Profile"})})]})]})}),r.jsxs(nt,{open:e,onClose:()=>t(!1),fullScreen:s,fullWidth:!0,maxWidth:"sm",disableRestoreFocus:!0,disableEnforceFocus:!0,children:[r.jsx(vt,{children:"Edit Profile"}),r.jsx(ht,{children:r.jsxs(bt,{spacing:2,mt:1,children:[r.jsx(J,{label:"Username",name:"username",fullWidth:!0,value:x.username,onChange:v}),r.jsx(J,{label:"Email",name:"email",fullWidth:!0,value:x.email,onChange:v}),r.jsxs(U,{fullWidth:!0,component:"label",sx:{mt:2,py:1.2,border:"1px dashed #0ff",color:"#222",fontWeight:"bold",textTransform:"none","&:hover":{backgroundColor:"rgba(0,255,255,0.08)"}},children:[u?u.name:"Avatar",r.jsx("input",{hidden:!0,type:"file",accept:"image/*",onChange:k})]})]})}),r.jsxs(pt,{children:[r.jsx(U,{onClick:()=>t(!1),children:"Cancel"}),r.jsx(U,{variant:"contained",onClick:M,children:w?r.jsx(G,{}):"Update"})]})]})]})};export{Et as default};
