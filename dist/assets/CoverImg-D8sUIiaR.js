import{c as f,j as a,r as s,B as x,z as r}from"./index-Cr5JfeOY.js";import{a as m,b as d}from"./api-DUhR3JNR.js";const j=f(a.jsx("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"})),z="/assets/cover-DnC0C9Qk.jpg",S=()=>{const[o,c]=s.useState(null),[n,l]=s.useState(!1),i=localStorage.getItem("TOKEN"),[g,u]=s.useState(null),p=async()=>{try{const t=await m.get(`${d}/api/coverImg/getImg`,{headers:{Authorization:`Bearer ${i}`}});u(t.data)}catch(t){console.log(t)}};s.useEffect(()=>{p()},[]);const h=t=>{const e=t.target.files?.[0];if(!e)return;const v=1*1024*1024;if(e.size>v){r("File size must be less than 1 MB"),t.target.value="";return}c(e)};return s.useEffect(()=>{if(!o)return;(async()=>{try{l(!0);const e=new FormData;e.append("file",o),await m.post(`${d}/api/coverImg/cover/photo`,e,{headers:{Authorization:`Bearer ${i}`}}),r.success("Cover img upload"),c(null),p()}catch(e){console.log(e),r.error("error")}finally{l(!1)}})()},[o]),a.jsxs("div",{className:"cover-wrapper",children:[a.jsx("img",{src:g?.coverPhoto||z,alt:"cover",className:"cover-img"}),a.jsx("div",{className:"cover-actions",children:a.jsxs(x,{className:`cover-btn edit ${n?"uploading":""}`,component:"label",children:[a.jsx(j,{fontSize:"small"}),n?"Uploading...":"Change cover",a.jsx("input",{onChange:h,hidden:!0,type:"file",accept:"image/*"})]})})]})};export{S as C,j as U};
