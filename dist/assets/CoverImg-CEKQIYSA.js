import{r as a,j as o,B as h,z as r}from"./index-CFw7QNrO.js";import{a as m,b as u}from"./api-DUhR3JNR.js";import{U as x}from"./Upload-B6zO-5VH.js";const j="/assets/cover-DnC0C9Qk.jpg",I=()=>{const[s,c]=a.useState(null),[n,l]=a.useState(!1),i=localStorage.getItem("TOKEN"),[d,g]=a.useState(null),p=async()=>{try{const t=await m.get(`${u}/api/coverImg/getImg`,{headers:{Authorization:`Bearer ${i}`}});g(t.data)}catch(t){console.log(t)}};a.useEffect(()=>{p()},[]);const f=t=>{const e=t.target.files?.[0];if(!e)return;const v=1e3*1024;if(e.size>v){r("File size must be less than 800 KB"),t.target.value="";return}c(e)};return a.useEffect(()=>{if(!s)return;(async()=>{try{l(!0);const e=new FormData;e.append("file",s),await m.post(`${u}/api/coverImg/cover/photo`,e,{headers:{Authorization:`Bearer ${i}`}}),r.success("Cover img upload"),c(null),p()}catch(e){console.log(e),r.error("error")}finally{l(!1)}})()},[s]),o.jsxs("div",{className:"cover-wrapper",children:[o.jsx("img",{src:d?.coverPhoto||j,alt:"cover",className:"cover-img"}),o.jsx("div",{className:"cover-actions",children:o.jsxs(h,{className:`cover-btn edit ${n?"uploading":""}`,component:"label",children:[o.jsx(x,{fontSize:"small"}),n?"Uploading...":"Change cover",o.jsx("input",{onChange:f,hidden:!0,type:"file",accept:"image/*"})]})})]})};export{I as C};
