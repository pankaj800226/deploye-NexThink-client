import{r as s,j as e,p as C,L as T,B as c,z as f,x as A}from"./index-CY9zOmYQ.js";import{S as z}from"./SideBar-BBRIQjMC.js";import{a as j,b as x}from"./api-DUhR3JNR.js";import{A as E}from"./ApiError-LwIP1_k-.js";import{E as M}from"./Edit-DfENrNm_.js";import{D as U}from"./Delete-Dl3jmvxe.js";import{C as W,U as B}from"./CoverImg-COYB4il8.js";import{u as I}from"./Paper-CO1j99Jh.js";import{u as O}from"./index-BZa-m2eS.js";import{D as R,a as H,b as K,S as Q,c as q}from"./Stack-UgxcSQfA.js";import{T as b}from"./TextField-DsxvzpqO.js";import{M as v}from"./MenuItem-aLuq0RAK.js";import"./iconBase-Bs8YmVSh.js";import"./getThemeProps-BWm2fQzF.js";import"./Typography-DUMAFcIK.js";import"./useThemeProps-D_g1L7Cc.js";import"./index-g_6HBObC.js";import"./dividerClasses-DT9YdtZI.js";const G=({id:l,refresh:i})=>{const[d,u]=s.useState([]),[r,g]=s.useState(""),[h,p]=s.useState(!1);s.useEffect(()=>{if(!l)return;(async()=>{try{p(!0);const a=await j.get(`${x}/api/feature/get/feature/${l}`);u(a.data.findFeature)}catch(a){console.log(a),g("api fetching error")}finally{p(!1)}})()},[l,i]);const y=async t=>{try{await j.delete(`${x}/api/feature/delete/feature/${t}`),u(a=>a.filter(m=>m._id!==t)),f.success("feature delete done")}catch(a){console.log(a),f.error("error")}};return r?e.jsx(E,{error:r}):h?e.jsx(C,{}):e.jsx("div",{children:e.jsxs("div",{className:"todo-wrapper",children:[e.jsx("h2",{className:"todo-title",children:"All Feature"}),d.length===0?e.jsx("div",{className:"todo-empty",children:"No Feature yet ðŸš€"}):e.jsx("ul",{className:"todo-list",children:d.map(t=>e.jsxs("li",{className:`todo-item ${t.status}`,children:[e.jsxs("div",{className:"todo-left",children:[e.jsx("span",{className:"todo-dot"}),e.jsxs("div",{children:[e.jsx("h4",{children:t.title}),e.jsx("small",{children:t.status})]})]}),e.jsxs("div",{className:"todo-actions",children:[e.jsx(T,{to:`/editfeature/${t._id}`,children:e.jsx(c,{size:"small",children:e.jsx(M,{})})}),e.jsx(c,{onClick:()=>y(t._id),size:"small",color:"error",children:e.jsx(U,{})})]})]},t._id))})]})})},pe=()=>{const[l,i]=s.useState(!1),d=I(),u=O(d.breakpoints.down("sm")),[r,g]=s.useState(null),[h,p]=s.useState(""),[y,t]=s.useState(!1),{id:a}=A(),[m,S]=s.useState(""),[D,F]=s.useState("pending"),[k,N]=s.useState(!1),w=localStorage.getItem("TOKEN"),[$,_]=s.useState(!1);s.useEffect(()=>{(async()=>{try{t(!0);const n=await j.get(`${x}/api/project/projectId/${a}`);g(n.data)}catch(n){console.log(n),p("api fetching error")}finally{t(!1)}})()},[]);const L=o=>{switch(o){case"High":return"#ff4d4d";case"Medium":return"#ffb703";case"Low":return"#6025c7";default:return"#4ade80"}},P=async()=>{try{N(!0),(await j.post(`${x}/api/feature/create/feature/${a}`,{title:m,status:D},{headers:{Authorization:`Bearer ${w}`}})).status===200&&(f("!Feature create Done.",{duration:2e3,position:"bottom-right",icon:"ðŸ‘",iconTheme:{primary:"#000",secondary:"#fff"},ariaProps:{role:"status","aria-live":"polite"}}),_(n=>!n)),i(!1)}catch(o){console.log(o),f.error("error")}finally{N(!1)}S(""),F("")};return h?e.jsx(E,{error:h}):y?e.jsx(C,{}):e.jsxs("div",{className:"dashboard_container",children:[e.jsx(z,{}),e.jsxs("main",{children:[e.jsx(W,{}),e.jsxs("div",{className:"project_header",children:[e.jsx("p",{children:'"ðŸ’•Enjoy you works and complete your task"ðŸ’“'}),e.jsx(c,{onClick:()=>i(!0),children:e.jsx(B,{})})]}),e.jsxs("div",{className:"project_details",children:[e.jsx("h2",{children:r?.title}),e.jsx("p",{children:r?.category}),e.jsx("strong",{style:{color:L(r?.priority)},children:r?.priority}),e.jsx("strong",{children:r?.status}),e.jsx("p",{children:r?.startDate}),e.jsx("p",{children:r?.endDate}),e.jsx("p",{className:"description",children:r?.description})]}),e.jsx(G,{id:a,refresh:$})]}),e.jsxs(R,{open:l,onClose:()=>i(!1),fullScreen:u,fullWidth:!0,maxWidth:"sm",disableRestoreFocus:!0,disableEnforceFocus:!0,children:[e.jsx(H,{sx:{color:"white"},children:"Upload Feature"}),e.jsx(K,{children:e.jsxs(Q,{spacing:2,mt:1,children:[e.jsx(b,{label:"Title",fullWidth:!0,value:m,onChange:o=>S(o.target.value)}),e.jsxs(b,{value:D,onChange:o=>F(o.target.value),fullWidth:!0,select:!0,label:"Status",children:[e.jsx(v,{value:"pending",children:"Pending"}),e.jsx(v,{value:"working",children:"Working"}),e.jsx(v,{value:"completed",children:"Completed"})]})]})}),e.jsxs(q,{children:[e.jsx(c,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(c,{onClick:P,variant:"contained",children:k?"Loading...":"Update"})]})]})]})};export{pe as default};
