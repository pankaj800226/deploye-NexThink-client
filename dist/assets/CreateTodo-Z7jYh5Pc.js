import{r as u,u as S,j as e,P as W,M as r,B as A,C as k,z as d}from"./index-CFw7QNrO.js";import{S as P}from"./SideBar-BinzQGkd.js";import{a as w,b as E}from"./api-DUhR3JNR.js";import{A as I}from"./ApiError--DYczvfi.js";import{B as M}from"./Box-DLoZB9m7.js";import{m as j}from"./proxy-DKRPRL3g.js";import{T as B}from"./Typography-DzvG7ZMc.js";import{T as o}from"./TextField-BuEwsmCw.js";import{A as O}from"./AddTask-CEkltkAE.js";import"./iconBase-Cszeo0Nu.js";const q=()=>{const[t,v]=u.useState({title:"",description:"",price:"",category:"",priority:"",status:"",createdAt:new Date().toISOString()}),[y,h]=u.useState(!1),f=localStorage.getItem("TOKEN"),m=S(),[p,b]=u.useState(""),a=s=>{const{name:l,value:c}=s.target;v(n=>({...n,[l]:c}))},C=async()=>{const{title:s,description:l,price:c,category:n,priority:x,status:g}=t;if(!f)return d.error("You are not login"),m("/login");if(!s||!l||!n||!x||!g)return d("All field are required");try{h(!0),await w.post(`${E}/api/todo/createTodo`,{title:s,description:l,price:c,category:n,priority:x,status:g},{headers:{Authorization:`Bearer ${f}`}}),d.success("Task Create Sucessfully! ðŸ“© Check Your Email!"),m("/managetodo")}catch(T){console.log(T),d.error("Error creating todo"),b("Api fetching error")}finally{h(!1)}};return p?e.jsx(I,{error:p}):e.jsxs("div",{className:"dashboard_container",children:[e.jsx(P,{}),e.jsx("main",{children:e.jsx(M,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(j.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:e.jsxs(W,{elevation:6,sx:{padding:4,borderRadius:3,background:"#151a1f",minWidth:400},children:[e.jsx(B,{variant:"h5",mb:3,textAlign:"center",color:"#fff",fontWeight:"bold",children:"Create New Todo"}),e.jsx(o,{fullWidth:!0,label:"Title",name:"title",value:t.title,onChange:a,sx:i}),e.jsx(o,{fullWidth:!0,type:"number",label:"Price (optional)",name:"price",value:t.price,onChange:a,sx:i}),e.jsxs(o,{fullWidth:!0,select:!0,label:"Category",name:"category",value:t.category,onChange:a,sx:i,children:[e.jsx(r,{value:"Work",children:"Work"}),e.jsx(r,{value:"Personal",children:"Personal"}),e.jsx(r,{value:"Study",children:"Study"}),e.jsx(r,{value:"Other",children:"Other"})]}),e.jsxs(o,{fullWidth:!0,select:!0,label:"Priority",name:"priority",value:t.priority,onChange:a,sx:i,children:[e.jsx(r,{value:"Low",children:"Low"}),e.jsx(r,{value:"Medium",children:"Medium"}),e.jsx(r,{value:"High",children:"High"})]}),e.jsxs(o,{fullWidth:!0,select:!0,label:"Status",name:"status",value:t.status,onChange:a,sx:i,children:[e.jsx(r,{value:"pending",children:"Pending"}),e.jsx(r,{value:"inprogress",children:"In Progress"}),e.jsx(r,{value:"completed",children:"completed"})]}),e.jsx(o,{fullWidth:!0,multiline:!0,rows:9,label:"Description",name:"description",value:t.description,onChange:a,sx:i}),e.jsx(j.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(A,{fullWidth:!0,onClick:C,variant:"contained",startIcon:e.jsx(O,{}),sx:{mt:3,py:1.4,background:"linear-gradient(135deg,#6a5af9,#9a6bff)",fontWeight:"bold",borderRadius:2},children:y?e.jsx(k,{size:20}):"Add Todo"})})]})})})})]})},i={mb:2,"& label":{color:"#aaa"},"& label.Mui-focused":{color:"#6a5af9"},"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"#2a2f36"},"&:hover fieldset":{borderColor:"#6a5af9"},"&.Mui-focused fieldset":{borderColor:"#9a6bff"}}};export{q as default};
