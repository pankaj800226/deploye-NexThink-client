import{c as We,j as l,a as Ae,r as x}from"./index-BwBHtjEM.js";import{G as $e}from"./iconBase-Coflz5dC.js";import{D as Xe}from"./Delete-De7_VIIK.js";const Ke=We(l.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),Ue=We(l.jsx("path",{d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H6V6h12z"})),qe=We(l.jsx("path",{d:"M2 20h20v4H2zm3.49-3h2.42l1.27-3.58h5.65L16.09 17h2.42L13.25 3h-2.5zm4.42-5.61 2.03-5.79h.12l2.03 5.79z"}));function Ye(e){return $e({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M290.7 57.4L57.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7L288 480l9.4 0L512 480c17.7 0 32-14.3 32-32s-14.3-32-32-32l-124.1 0L518.6 285.3c25-25 25-65.5 0-90.5L381.3 57.4c-25-25-65.5-25-90.5 0zM297.4 416l-9.4 0-105.4 0-80-80L227.3 211.3 364.7 348.7 297.4 416z"},child:[]}]})(e)}const et=()=>{const e=Ae.c(103),s=x.useRef(null),M=x.useRef(null),[r,h]=x.useState("pencil"),[a,A]=x.useState("#000000"),[f,g]=x.useState(2),[u,Ne]=x.useState("Arial"),[d,Ve]=x.useState(18),[v,Pe]=x.useState(!1);let V;e[0]===Symbol.for("react.memo_cache_sentinel")?(V={x:0,y:0},e[0]=V):V=e[0];const[S,Be]=x.useState(V);let B;e[1]===Symbol.for("react.memo_cache_sentinel")?(B=[],e[1]=B):B=e[1];const[m,b]=x.useState(B),[N,Ge]=x.useState("light");let G;e[2]===Symbol.for("react.memo_cache_sentinel")?(G={show:!1,x:0,y:0,value:""},e[2]=G):G=e[2];const[c,_e]=x.useState(G),[y,Me]=x.useState(null);let H;e[3]===Symbol.for("react.memo_cache_sentinel")?(H={x:0,y:0},e[3]=H):H=e[3];const[O,He]=x.useState(H);let $;e[4]===Symbol.for("react.memo_cache_sentinel")?($=["#000000","#FF3B30","#FF9500","#FFCC00","#4CD964","#5AC8FA","#0579FF","#5856D6","#FF2D55"],e[4]=$):$=e[4];const Oe=$;let X,K;e[5]===Symbol.for("react.memo_cache_sentinel")?(X=()=>{const t=s.current,o=()=>{t.width=window.innerWidth,t.height=window.innerHeight};o(),window.addEventListener("resize",o);const n=t.getContext("2d");return n.lineCap="round",M.current=n,()=>window.removeEventListener("resize",o)},K=[],e[5]=X,e[6]=K):(X=e[5],K=e[6]),x.useEffect(X,K);let U,q;e[7]!==m?(U=()=>{const t=M.current,o=s.current;t.clearRect(0,0,o.width,o.height),m.forEach(n=>{if(t.save(),n.type==="eraser"){t.globalCompositeOperation="destination-out",t.lineWidth=n.lineWidth,t.beginPath(),n.points.forEach((i,p)=>p===0?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)),t.stroke(),t.restore();return}t.globalCompositeOperation="source-over",n.type==="pencil"&&(t.strokeStyle=n.color,t.lineWidth=n.lineWidth,t.beginPath(),n.points.forEach((i,p)=>p===0?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)),t.stroke()),n.type==="rect"&&(t.strokeStyle=n.color,t.lineWidth=n.lineWidth,t.strokeRect(n.x,n.y,n.width,n.height)),n.type==="text"&&(t.fillStyle=n.color,t.font=`${n.fontSize}px ${n.fontFamily}`,t.fillText(n.text,n.x,n.y)),t.restore()})},q=[m],e[7]=m,e[8]=U,e[9]=q):(U=e[8],q=e[9]),x.useEffect(U,q);let Y;e[10]===Symbol.for("react.memo_cache_sentinel")?(Y=t=>{const o=s.current.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top}},e[10]=Y):Y=e[10];const je=Y;let J;e[11]!==a||e[12]!==f||e[13]!==m||e[14]!==r?(J=t=>{t.preventDefault();const o=je(t),n=m.findIndex(i=>i.type==="text"&&o.x>=i.x&&o.x<=i.x+i.text.length*10&&o.y<=i.y&&o.y>=i.y-18);if(n!==-1){Me(n);const i=m[n];He({x:o.x-i.x,y:o.y-i.y});return}if(r==="text"){_e({show:!0,x:o.x,y:o.y,value:""});return}Pe(!0),Be(o),(r==="pencil"||r==="eraser")&&b(i=>[...i,{type:r,points:[o],color:a,lineWidth:r==="eraser"?24:f}])},e[11]=a,e[12]=f,e[13]=m,e[14]=r,e[15]=J):J=e[15];const Ce=J;let Q;e[16]!==O||e[17]!==y||e[18]!==v||e[19]!==r?(Q=t=>{const o=je(t);if(y!==null){b(n=>{const i=[...n],p=i[y];return p.type==="text"&&(p.x=o.x-O.x,p.y=o.y-O.y),i});return}v&&(r==="pencil"||r==="eraser")&&b(n=>{const i=n[n.length-1];return i.points.push(o),[...n.slice(0,-1),i]})},e[16]=O,e[17]=y,e[18]=v,e[19]=r,e[20]=Q):Q=e[20];const ke=Q;let Z;e[21]!==a||e[22]!==y||e[23]!==v||e[24]!==f||e[25]!==S||e[26]!==r?(Z=t=>{if(y!==null){Me(null);return}if(v&&(Pe(!1),r==="rect")){const o=je(t);b(n=>[...n,{type:"rect",x:S.x,y:S.y,width:o.x-S.x,height:o.y-S.y,color:a,lineWidth:f}])}},e[21]=a,e[22]=y,e[23]=v,e[24]=f,e[25]=S,e[26]=r,e[27]=Z):Z=e[27];const Fe=Z;let ee;e[28]!==a||e[29]!==u||e[30]!==d||e[31]!==c.value||e[32]!==c.x||e[33]!==c.y?(ee=t=>{t.key==="Enter"&&(c.value.trim()&&b(o=>[...o,{type:"text",x:c.x,y:c.y,text:c.value,color:a,fontSize:d,fontFamily:u}]),_e({show:!1,x:0,y:0,value:""}))},e[28]=a,e[29]=u,e[30]=d,e[31]=c.value,e[32]=c.x,e[33]=c.y,e[34]=ee):ee=e[34];const ze=ee,Re=N==="light"?"#fff":"#1e1e1e";let w;e[35]!==Re?(w={position:"fixed",top:12,left:"50%",transform:"translateX(-50%)",background:Re,padding:12,borderRadius:20,display:"flex",alignItems:"center",gap:12,boxShadow:"0 8px 30px rgba(0,0,0,0.15)",zIndex:20,maxWidth:"95vw",overflowX:"auto",whiteSpace:"nowrap"},e[35]=Re,e[36]=w):w=e[36];const Te=r==="pencil";let te,ne;e[37]===Symbol.for("react.memo_cache_sentinel")?(te=()=>h("pencil"),ne=l.jsx(Ke,{}),e[37]=te,e[38]=ne):(te=e[37],ne=e[38]);let _;e[39]!==Te?(_=l.jsx(P,{active:Te,onClick:te,children:ne}),e[39]=Te,e[40]=_):_=e[40];const De=r==="rect";let le,oe;e[41]===Symbol.for("react.memo_cache_sentinel")?(le=()=>h("rect"),oe=l.jsx(Ue,{}),e[41]=le,e[42]=oe):(le=e[41],oe=e[42]);let j;e[43]!==De?(j=l.jsx(P,{active:De,onClick:le,children:oe}),e[43]=De,e[44]=j):j=e[44];const Ie=r==="text";let ie,re;e[45]===Symbol.for("react.memo_cache_sentinel")?(ie=()=>h("text"),re=l.jsx(qe,{}),e[45]=ie,e[46]=re):(ie=e[45],re=e[46]);let C;e[47]!==Ie?(C=l.jsx(P,{active:Ie,onClick:ie,children:re}),e[47]=Ie,e[48]=C):C=e[48];const Ee=r==="eraser";let se,ce;e[49]===Symbol.for("react.memo_cache_sentinel")?(se=()=>h("eraser"),ce=l.jsx(Ye,{}),e[49]=se,e[50]=ce):(se=e[49],ce=e[50]);let k;e[51]!==Ee?(k=l.jsx(P,{active:Ee,onClick:se,children:ce}),e[51]=Ee,e[52]=k):k=e[52];let ae;e[53]===Symbol.for("react.memo_cache_sentinel")?(ae={display:"flex",gap:6},e[53]=ae):ae=e[53];let F;e[54]!==a?(F=l.jsx("div",{style:ae,children:Oe.map(t=>l.jsx("div",{onClick:()=>A(t),style:{width:24,height:24,borderRadius:"50%",background:t,border:t===a?"3px solid #6366f1":"1px solid #aaa",cursor:"pointer"}},t))}),e[54]=a,e[55]=F):F=e[55];let fe,xe;e[56]===Symbol.for("react.memo_cache_sentinel")?(fe=t=>g(Number(t.target.value)),xe={cursor:"pointer"},e[56]=fe,e[57]=xe):(fe=e[56],xe=e[57]);let z;e[58]!==f?(z=l.jsx("input",{type:"range",min:1,max:40,value:f,onChange:fe,style:xe}),e[58]=f,e[59]=z):z=e[59];let ue,de;e[60]===Symbol.for("react.memo_cache_sentinel")?(ue=t=>Ve(Number(t.target.value)),de={width:60,padding:4,borderRadius:6},e[60]=ue,e[61]=de):(ue=e[60],de=e[61]);let R;e[62]!==d?(R=l.jsx("input",{type:"number",min:8,max:72,value:d,onChange:ue,style:de}),e[62]=d,e[63]=R):R=e[63];let he,me,ye,pe,ge,ve,Se;e[64]===Symbol.for("react.memo_cache_sentinel")?(he=t=>Ne(t.target.value),me={padding:"4px 6px",borderRadius:6,cursor:"pointer"},ye=l.jsx("option",{value:"Arial",children:"Arial"}),pe=l.jsx("option",{value:"Verdana",children:"Verdana"}),ge=l.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),ve=l.jsx("option",{value:"Courier New",children:"Courier New"}),Se=l.jsx("option",{value:"Georgia",children:"Georgia"}),e[64]=he,e[65]=me,e[66]=ye,e[67]=pe,e[68]=ge,e[69]=ve,e[70]=Se):(he=e[64],me=e[65],ye=e[66],pe=e[67],ge=e[68],ve=e[69],Se=e[70]);let T;e[71]!==u?(T=l.jsxs("select",{value:u,onChange:he,style:me,children:[ye,pe,ge,ve,Se]}),e[71]=u,e[72]=T):T=e[72];let D;e[73]!==N?(D=l.jsx(P,{onClick:()=>Ge(N==="light"?"dark":"light"),children:"ðŸŒ—"}),e[73]=N,e[74]=D):D=e[74];let be;e[75]===Symbol.for("react.memo_cache_sentinel")?(be=l.jsx(P,{onClick:()=>b([]),children:l.jsx(Xe,{})}),e[75]=be):be=e[75];let I;e[76]!==w||e[77]!==_||e[78]!==j||e[79]!==C||e[80]!==k||e[81]!==F||e[82]!==z||e[83]!==R||e[84]!==T||e[85]!==D?(I=l.jsxs("div",{style:w,children:[_,j,C,k,F,z,R,T,D,be]}),e[76]=w,e[77]=_,e[78]=j,e[79]=C,e[80]=k,e[81]=F,e[82]=z,e[83]=R,e[84]=T,e[85]=D,e[86]=I):I=e[86];const Le=N==="light"?"#f5f5f5":"#111";let E;e[87]!==Le?(E={background:Le,touchAction:"none"},e[87]=Le,e[88]=E):E=e[88];let L;e[89]!==Ce||e[90]!==ke||e[91]!==Fe||e[92]!==E?(L=l.jsx("canvas",{ref:s,onPointerDown:Ce,onPointerMove:ke,onPointerUp:Fe,style:E}),e[89]=Ce,e[90]=ke,e[91]=Fe,e[92]=E,e[93]=L):L=e[93];let W;e[94]!==u||e[95]!==d||e[96]!==ze||e[97]!==c?(W=c.show&&l.jsx("input",{autoFocus:!0,value:c.value,onChange:t=>_e({...c,value:t.target.value}),onKeyDown:ze,style:{position:"fixed",top:c.y,left:c.x,fontSize:d,fontFamily:u,padding:4,zIndex:30}}),e[94]=u,e[95]=d,e[96]=ze,e[97]=c,e[98]=W):W=e[98];let we;return e[99]!==I||e[100]!==L||e[101]!==W?(we=l.jsxs(l.Fragment,{children:[I,L,W]}),e[99]=I,e[100]=L,e[101]=W,e[102]=we):we=e[102],we};function P(e){const s=Ae.c(7),{active:M,children:r,onClick:h}=e,a=M?"#6366f1":"transparent",A=M?"#fff":"inherit";let f;s[0]!==a||s[1]!==A?(f={padding:"6px 10px",borderRadius:10,border:"none",cursor:"pointer",background:a,color:A,fontSize:16},s[0]=a,s[1]=A,s[2]=f):f=s[2];let g;return s[3]!==r||s[4]!==h||s[5]!==f?(g=l.jsx("button",{onClick:h,style:f,children:r}),s[3]=r,s[4]=h,s[5]=f,s[6]=g):g=s[6],g}export{et as default};
