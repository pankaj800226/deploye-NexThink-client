import{r as s,j as e,n as E,L as P,B as c,z as h,l as T,v as A,M as y}from"./index-CFw7QNrO.js";import{S as C}from"./SideBar-BinzQGkd.js";import{a as p,b as j}from"./api-DUhR3JNR.js";import{A as $}from"./ApiError--DYczvfi.js";import{E as z}from"./Edit-DgkfYcWD.js";import{D as M}from"./Delete--HB4pDbY.js";import{u as U}from"./index-DI4aagrH.js";import{U as W}from"./Upload-B6zO-5VH.js";import{D as B,a as I,b as O,S as R,c as H}from"./Stack-BJarjD6M.js";import{T as F}from"./TextField-BuEwsmCw.js";import"./iconBase-Cszeo0Nu.js";import"./getThemeProps-0IDanWD3.js";import"./Typography-DzvG7ZMc.js";import"./useThemeProps-CAgvT1xo.js";const K=({id:m})=>{const[i,d]=s.useState([]),[u,a]=s.useState(""),[x,l]=s.useState(!1);s.useEffect(()=>{(async()=>{try{l(!0);const t=await p.get(`${j}/api/feature/get/feature/${m}`);d(t.data.findFeature)}catch(t){console.log(t),a("api fetching error")}finally{l(!1)}})()},[]);const f=async r=>{try{await p.delete(`${j}/api/feature/delete/feature/${r}`),d(t=>t.filter(n=>n._id!==r)),h.success("feature delete done")}catch(t){console.log(t),h.error("error")}};return u?e.jsx($,{error:u}):x?e.jsx(E,{}):e.jsxs("div",{className:"dashboard_container",children:[e.jsx(C,{}),e.jsx("main",{children:e.jsxs("div",{className:"todo-wrapper",children:[e.jsx("h2",{className:"todo-title",children:"All Feature"}),i.length===0?e.jsx("div",{className:"todo-empty",children:"No todos yet ðŸš€"}):e.jsx("ul",{className:"todo-list",children:i.map((r,t)=>e.jsxs("li",{className:`todo-item ${r.status}`,children:[e.jsxs("div",{className:"todo-left",children:[e.jsx("span",{className:"todo-dot"}),e.jsxs("div",{children:[e.jsx("h4",{children:r.title}),e.jsx("small",{children:r.status})]})]}),e.jsxs("div",{className:"todo-actions",children:[e.jsx(P,{to:`/editfeature/${r._id}`,children:e.jsx(c,{size:"small",children:e.jsx(z,{})})}),e.jsx(c,{onClick:()=>f(r._id),size:"small",color:"error",children:e.jsx(M,{})})]})]},t))})]})})]})},ie=()=>{const[m,i]=s.useState(!1),d=T(),u=U(d.breakpoints.down("sm")),[a,x]=s.useState(null),[l,f]=s.useState(""),[r,t]=s.useState(!1),{id:n}=A(),[v,S]=s.useState(""),[D,N]=s.useState("pending"),[k,b]=s.useState(!1),w=localStorage.getItem("TOKEN");s.useEffect(()=>{(async()=>{try{t(!0);const g=await p.get(`${j}/api/project/projectId/${n}`);x(g.data)}catch(g){console.log(g),f("api fetching error")}finally{t(!1)}})()},[]);const _=o=>{switch(o){case"High":return"#ff4d4d";case"Medium":return"#ffb703";case"Low":return"#6025c7";default:return"#4ade80"}},L=async()=>{try{b(!0),(await p.post(`${j}/api/feature/create/feature/${n}`,{title:v,status:D},{headers:{Authorization:`Bearer ${w}`}})).status===200&&h("!Feature create Done.",{duration:2e3,position:"bottom-right",icon:"ðŸ‘",iconTheme:{primary:"#000",secondary:"#fff"},ariaProps:{role:"status","aria-live":"polite"}}),i(!1)}catch(o){console.log(o),h.error("error")}finally{b(!1)}S(""),N("")};return l?e.jsx($,{error:l}):r?e.jsx(E,{}):e.jsxs("div",{className:"dashboard_container",children:[e.jsx(C,{}),e.jsxs("main",{children:[e.jsxs("div",{className:"project_header",children:[e.jsx("input",{type:"text",placeholder:"Serach Feature"}),e.jsx(c,{onClick:()=>i(!0),children:e.jsx(W,{})})]}),e.jsxs("div",{className:"project_details",children:[e.jsx("h2",{children:a?.title}),e.jsx("p",{children:a?.category}),e.jsx("strong",{style:{color:_(a?.priority)},children:a?.priority}),e.jsx("strong",{children:a?.status}),e.jsx("p",{children:a?.startDate}),e.jsx("p",{children:a?.endDate}),e.jsx("p",{className:"description",children:a?.description})]}),e.jsx(K,{id:n})]}),e.jsxs(B,{open:m,onClose:()=>i(!1),fullScreen:u,fullWidth:!0,maxWidth:"sm",disableRestoreFocus:!0,disableEnforceFocus:!0,children:[e.jsx(I,{sx:{color:"white"},children:"Upload Feature"}),e.jsx(O,{children:e.jsxs(R,{spacing:2,mt:1,children:[e.jsx(F,{label:"Title",fullWidth:!0,value:v,onChange:o=>S(o.target.value)}),e.jsxs(F,{value:D,onChange:o=>N(o.target.value),fullWidth:!0,select:!0,label:"Status",children:[e.jsx(y,{value:"pending",children:"Pending"}),e.jsx(y,{value:"working",children:"Working"}),e.jsx(y,{value:"completed",children:"Completed"})]})]})}),e.jsxs(H,{children:[e.jsx(c,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(c,{onClick:L,variant:"contained",children:k?"Loading...":"Update"})]})]})]})};export{ie as default};
